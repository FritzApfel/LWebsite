<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Minecraft Plugin Academy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            mcgreen: '#22c55e',
            mcdark: '#0f172a'
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gradient-to-br from-mcdark to-black text-gray-100 min-h-screen">

<!-- NAVBAR -->
<header class="bg-black/60 backdrop-blur sticky top-0 z-50">
  <div class="max-w-7xl mx-auto p-4 flex justify-between items-center">
    <h1 class="text-2xl font-extrabold text-mcgreen">‚õè Minecraft Plugin Academy</h1>
  </div>
</header>

<!-- HERO -->
<section class="text-center py-16">
  <h2 class="text-4xl font-extrabold mb-4">Lerne Minecraft Plugins Schritt f√ºr Schritt</h2>
  <p class="text-gray-400 max-w-xl mx-auto">Egal ob Anf√§nger oder ohne Vorkenntnisse ‚Äì wir f√ºhren dich vom ersten Java-Code bis zum fertigen Minecraft Plugin.</p>
</section>

<!-- CONTENT -->
<main class="max-w-7xl mx-auto px-6 pb-20 grid lg:grid-cols-3 gap-8">

  <!-- Kurse -->
  <section class="lg:col-span-2">
    <h3 class="text-2xl font-bold mb-6">üìö Kurse</h3>
    <div id="courses" class="grid sm:grid-cols-2 gap-6"></div>
  </section>

  <!-- Fortschritt -->
  <aside class="bg-white/5 border border-white/10 rounded-xl p-6">
    <h3 class="text-xl font-bold mb-4">üìä Dein Fortschritt</h3>
    <ul id="progress" class="space-y-2 text-gray-300"></ul>
  </aside>
</main>

<!-- MODAL -->
<div id="modal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50">
  <div class="bg-mcdark border border-white/10 rounded-xl w-[480px] p-6">
    <h2 id="lessonTitle" class="text-xl font-bold mb-3"></h2>
    <p id="lessonText" class="mb-4 text-gray-300"></p>
    <pre class="bg-black/80 text-green-400 p-4 rounded-lg text-sm overflow-auto mb-4"><code id="lessonCode"></code></pre>

    <!-- Interaktiver Editor -->
    <textarea id="editor" class="w-full h-32 bg-black/90 text-green-300 p-2 rounded mb-4 font-mono" placeholder="Schreibe deinen Code hier..."></textarea>
    <button onclick="runCode()" class="px-4 py-2 rounded bg-mcgreen text-black font-bold mb-4">Code testen</button>
    <pre id="output" class="bg-black/80 text-yellow-400 p-2 rounded text-sm mb-4 h-24 overflow-auto"></pre>

    <div class="flex justify-end gap-2">
      <button onclick="closeModal()" class="px-4 py-2 rounded bg-gray-700">Schlie√üen</button>
      <button onclick="finishLesson()" class="px-4 py-2 rounded bg-mcgreen text-black font-bold">N√§chstes Kapitel</button>
    </div>
  </div>
</div>

<script>
// ================= DATEN =================
const courses = [
  {
    id: 'java',
    title: 'Java Grundlagen',
    chapters: [
      {
        title: 'Was ist Java?',
        lesson: {
          text: 'Java ist eine objektorientierte Sprache. Wir starten mit einfachen Beispielen.',
          code: 'public class Main {\n  public static void main(String[] args) {\n    System.out.println("Hello Minecraft!");\n  }\n}'
        }
      },
      {
        title: 'Variablen & Datentypen',
        lesson: {
          text: 'Variablen speichern Werte. Wir erkl√§ren int, String, boolean etc.',
          code: 'int spieler = 10;\nString name = "Steve";\nboolean online = true;'
        }
      }
    ]
  },
  {
    id: 'spigot',
    title: 'Spigot Plugin Basics',
    chapters: [
      {
        title: 'Plugin Struktur',
        lesson: {
          text: 'Jedes Plugin hat eine Hauptklasse, die von JavaPlugin erbt.',
          code: 'public class MyPlugin extends JavaPlugin {\n  @Override\n  public void onEnable() {\n    getLogger().info("Plugin gestartet");\n  }\n}'
        }
      }
    ]
  }
];

let progress = {};
let activeCourse;
let activeChapter;

// ================= UI =================
function renderCourses() {
  const el = document.getElementById('courses');
  el.innerHTML = '';

  courses.forEach(course => {
    const done = progress[course.id] || 0;
    const total = course.chapters.length;
    const percent = Math.min(100, (done / total) * 100);

    el.innerHTML += `
      <div class="bg-white/5 border border-white/10 rounded-xl p-5">
        <h4 class="text-lg font-bold">${course.title}</h4>
        <p class="text-sm text-gray-400 mb-2">${done} / ${total} Kapitel</p>
        <div class="w-full h-2 bg-black/40 rounded mb-3">
          <div class="h-2 bg-mcgreen rounded" style="width:${percent}%"></div>
        </div>
        <button onclick="openCourse('${course.id}')" class="bg-mcgreen text-black font-bold px-4 py-2 rounded w-full">Kurs √∂ffnen</button>
      </div>`;
  });
}

function renderProgress() {
  const el = document.getElementById('progress');
  el.innerHTML = '';
  for (const key in progress) {
    el.innerHTML += `<li>${key}: ${progress[key]} Kapitel abgeschlossen</li>`;
  }
}

// ================= LESSON =================
function openCourse(courseId) {
  activeCourse = courses.find(c => c.id === courseId);
  activeChapter = 0;
  openLesson(activeChapter);
}

function openLesson(chapterIndex) {
  if (!activeCourse) return;
  const chapter = activeCourse.chapters[chapterIndex];
  if (!chapter) return;

  activeChapter = chapterIndex;
  document.getElementById('lessonTitle').innerText = chapter.title;
  document.getElementById('lessonText').innerText = chapter.lesson.text;
  document.getElementById('lessonCode').innerText = chapter.lesson.code;
  document.getElementById('editor').value = chapter.lesson.code;
  document.getElementById('output').innerText = '';
  document.getElementById('modal').classList.remove('hidden');
}

function closeModal() {
  document.getElementById('modal').classList.add('hidden');
}

function finishLesson() {
  if (!activeCourse) return;
  progress[activeCourse.id] = (progress[activeCourse.id] || 0) + 1;
  closeModal();
  renderCourses();
  renderProgress();
  if (activeChapter + 1 < activeCourse.chapters.length) {
    openLesson(activeChapter + 1);
  }
}

// ================= RUN CODE =================
function runCode() {
  const code = document.getElementById('editor').value;
  try {
    // Achtung: eval kann gef√§hrlich sein, hier nur f√ºr Lernzwecke
    const result = eval(code);
    document.getElementById('output').innerText = result === undefined ? 'Code ausgef√ºhrt!' : result;
  } catch (e) {
    document.getElementById('output').innerText = 'Fehler: ' + e.message;
  }
}

renderCourses();
renderProgress();
</script>

</body>
</html>
