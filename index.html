<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Fabian KI - Deine lokale Chat-KI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        appleRed: '#ef4444',
        appleDark: '#1f2937',
        appleLight: '#f3f4f6',
        appleGreen: '#22c55e',
      }
    }
  }
};
</script>
</head>
<body class="bg-gradient-to-br from-appleDark to-black text-white min-h-screen flex flex-col">

<header class="bg-appleDark/80 backdrop-blur sticky top-0 z-50 shadow-md">
  <div class="max-w-4xl mx-auto flex justify-between items-center p-4">
    <h1 class="text-2xl font-bold text-appleRed">üçé Fabian KI</h1>
    <button onclick="toggleChat()" class="px-4 py-2 bg-appleRed text-white font-bold rounded hover:bg-red-600">Chat √∂ffnen</button>
  </div>
</header>

<main class="flex-grow flex items-center justify-center p-6">
  <div class="text-center max-w-xl">
    <h2 class="text-4xl font-extrabold mb-4">Deine lokale Chat-KI</h2>
    <p class="text-gray-300 mb-6">Stelle der Fabian KI Fragen und erhalte intelligente, realistische Antworten ‚Äì alles lokal, keine API n√∂tig.</p>
    <input id="playerNameInput" type="text" placeholder="Dein Name..." class="px-4 py-2 rounded text-black w-full mb-2"/>
    <button onclick="setPlayerName()" class="px-4 py-2 bg-appleRed text-white font-bold rounded w-full">Start</button>
  </div>
</main>

<div id="chatWindow" class="hidden fixed inset-0 bg-black/90 flex flex-col items-center justify-start z-50 p-6 pt-16 overflow-auto">
  <button onclick="toggleChat()" class="absolute top-6 right-6 px-4 py-2 bg-red-600 rounded text-white">Schlie√üen</button>
  <h2 class="text-3xl font-bold mb-4 text-appleRed">üçé Fabian KI Chat</h2>

  <div class="flex gap-2 mb-4">
    <button onclick="askPreset('Hallo')" class="px-3 py-1 bg-appleRed rounded">Hallo</button>
    <button onclick="askPreset('Wie geht es dir?')" class="px-3 py-1 bg-appleRed rounded">Wie geht es dir?</button>
  </div>

  <div class="mb-4 flex items-center gap-2 w-full max-w-xl">
    <input id="newChatName" placeholder="Neuen Chatnamen eingeben..." class="flex-grow px-3 py-1 rounded text-black"/>
    <button onclick="createChat()" class="px-3 py-1 bg-appleRed rounded text-white">Chat erstellen</button>
  </div>

  <div id="chatList" class="flex gap-2 mb-4 overflow-x-auto"></div>

  <textarea id="chatInput" placeholder="Schreibe deine Frage..." class="w-full max-w-xl h-24 p-3 rounded bg-appleDark/80 mb-3"></textarea>
  <button onclick="askAI()" class="px-4 py-2 bg-appleRed text-white font-bold rounded mb-4 w-full max-w-xl">Frage stellen</button>

  <pre id="chatOutput" class="bg-appleDark/80 p-4 rounded text-white max-w-xl w-full h-96 overflow-auto"></pre>
</div>

<script>
let playerName = 'Spieler';
let chats = {};
let currentChat = null;

function setPlayerName() {
  const input = document.getElementById('playerNameInput').value.trim();
  if(input) playerName = input;
  document.getElementById('playerNameInput').parentElement.style.display = 'none';
  alert(`Hallo ${playerName}! Die Apfel KI ist bereit. (Programmiert von Fabian D.)`);
}

// Gro√üe KI Logik
class RealisticLogicAI {
  constructor(outputEl){
    this.outputEl = outputEl;
    this.memory = [];

    this.knowledge = [
      // Smalltalk
      { keywords: ['hallo','hi','hey'], responses: ['Hallo!', 'Hi, wie geht es dir?', 'Hey, sch√∂n dich zu sehen!'] },
      { keywords: ['wie geht es dir','wie l√§ufts'], responses: ['Mir geht es gut, danke!', 'Alles bestens hier!', 'Super, danke der Nachfrage.'] },
      { keywords: ['tsch√ºss','bye','auf wiedersehen'], responses: ['Tsch√ºss! Bis bald!', 'Auf Wiedersehen!', 'Mach‚Äôs gut!'] },

      // Zeit
      { keywords: ['zeit','uhr'], responses: [`Die aktuelle Uhrzeit ist ${new Date().toLocaleTimeString()}`, 'Schau mal auf deine Uhr!'] },

      // Mathematik
      { keywords: ['rechnen','berechne','math','summe','minus','mal','geteilt'], responses: [
        'Gib mir bitte die mathematische Aufgabe, dann l√∂se ich sie.',
        'Ich kann einfache Rechnungen ausf√ºhren. Zum Beispiel: 2+2=4'
      ]},

      // Programmieren
      { keywords: ['programmieren','code','javascript','java','python','c++'], responses: [
        'Ich kann dir erkl√§ren, wie man in verschiedenen Sprachen programmiert!',
        'Beispiel JavaScript: console.log("Hallo Welt");',
        'Beispiel Python: print("Hallo Welt")',
        'Beispiel Java: System.out.println("Hallo Welt");'
      ]},

      // Minecraft
      { keywords: ['minecraft','plugin','spigot','bukkit'], responses: [
        'F√ºr Minecraft Plugins empfehle ich Spigot oder Paper. Du kannst Events, Commands und GUI programmieren.',
        'Beispiel CommandExecutor:\n@Override\npublic boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\n sender.sendMessage("Befehl ausgef√ºhrt!"); return true;\n}'
      ]},

      // Allgemeinwissen
      { keywords: ['erkl√§re','was ist','definiere','wer ist'], responses: [
        'Hier ist eine kurze Erkl√§rung:',
        'Ich kann dir dar√ºber Informationen geben.',
        'Faszinierend! Lass mich erkl√§ren:'
      ]},

      // Wissenschaft
      { keywords: ['physik','chemie','mathematik','astronomie','biologie'], responses: [
        'In diesem Bereich kann ich dir fundiertes Wissen liefern.',
        'Wissenschaftliche Fakten:'
      ]},

      // Geschichte
      { keywords: ['geschichte','weltkrieg','r√∂misch','mittelalter'], responses: [
        'Lass uns √ºber Geschichte sprechen!',
        'Wichtige historische Fakten:'
      ]},

      // Raumfahrt
      { keywords: ['raumfahrt','planet','sonne','mond','mars'], responses: [
        'Die Raumfahrt ist spannend! Wusstest du, dass der Mars rote Farbe durch Eisenoxid hat?',
        'Astronomische Fakten:'
      ]},

      // Humor
      { keywords: ['witz','scherz','funny'], responses: [
        'Haha, das ist lustig!',
        'Ich liebe Humor! üòÑ',
        'Guter Witz!'
      ]},

      // Tiere
      { keywords: ['hund','katze','tier','vogel'], responses: [
        'Tiere sind faszinierend. Wusstest du, dass Katzen bis zu 20 Jahre alt werden k√∂nnen?',
        'Tiere bringen Freude ins Leben!'
      ]}
    ];

    this.defaultResponses = [
      'Interessant, erz√§hl mir mehr.',
      'Kannst du das genauer erkl√§ren?',
      'Hmmm‚Ä¶ dar√ºber habe ich noch nicht nachgedacht.',
      'Spannend, erz√§hl mir mehr!',
      'Ich verstehe, weiter‚Ä¶',
      'Faszinierend! Erz√§hle mir mehr, ich lerne st√§ndig dazu.',
      'Ich bin programmiert von Fabian D., um alles M√∂gliche zu beantworten.'
    ];
  }

  respond(inputEl){
    const question = inputEl.value.trim();
    if(!question || !currentChat) return;
    this.outputEl.innerText += `\n[KI denkt...]`;

    let answer = '';
    const lowerQ = question.toLowerCase();

    // Pr√ºfe die Knowledgebase
    for(const item of this.knowledge){
      if(item.keywords.some(k => lowerQ.includes(k))){
        answer = item.responses[Math.floor(Math.random() * item.responses.length)];
        break;
      }
    }

    // Zufallsantwort, wenn keine Keywords passen
    if(!answer){
      answer = this.defaultResponses[Math.floor(Math.random() * this.defaultResponses.length)];
    }

    // Memory speichern
    this.memory.push({question, answer});
    this.outputEl.innerText += `\n[Antwort]\n${answer}`;

    // Chat speichern
    chats[currentChat].push(`> ${question}`);
    chats[currentChat].push(answer);

    inputEl.value = '';
  }
}

const ai = new RealisticLogicAI(document.getElementById('chatOutput'));

function createChat(){
  const name = document.getElementById('newChatName').value.trim() || 'StandardChat';
  if(!chats[name]) chats[name] = [];
  currentChat = name;

  const chatListEl = document.getElementById('chatList');
  chatListEl.innerHTML = '';
  for(const chatName in chats){
    chatListEl.innerHTML += `<button onclick="switchChat('${chatName}')" class="px-2 py-1 bg-appleRed rounded">${chatName}</button>`;
  }

  ai.outputEl.innerText = '';
}

function switchChat(name){
  currentChat = name;
  ai.outputEl.innerText = chats[name].join('\n');
}

function askAI(){
  ai.respond(document.getElementById('chatInput'));
}

function askPreset(text){
  if(!currentChat) createChat();
  document.getElementById('chatInput').value = text;
  askAI();
}

function toggleChat(){
  document.getElementById('chatWindow').classList.toggle('hidden');
}
</script>

</body>
</html>
